---
# vars file for nextcloud
nextcloud_dl_file_name:
  latest: "{{['latest', nextcloud_version_major]|reject('undefined')|join('-')}}"
  releases: "{{['nextcloud', nextcloud_version_full]|reject('undefined')|join('-')}}"
  prereleases: "nextcloud-{{[nextcloud_version_full, nextcloud_version_special]|reject('undefined')|join()}}"
  daily: "nextcloud-{{nextcloud_version_major|d('')}}-daily-{{nextcloud_version_special|d('')}}"

# dict of supported releases build with data returned by the setup module:
# {{supported_os}}.{{ansible_distribution}}.{{ansible_distribution_release}}
supported_os:
  Debian:
    jessie:
      majorVersion: "8"
      phpVersion: "5"
      apache2:
        pkgName: "apache2"
        user: "www-data"
        group: "www-data"
      nginx:
        pkgName: "nginx"
        user: "www-data"
        group: "www-data"
  Ubuntu:
    trusty:
      majorVersion: "14"
      phpVersion: "5"
      apache2:
        pkgName: "apache2"
        user: "www-data"
        group: "www-data"
      nginx:
        pkgName: "nginx"
        user: "www-data"
        group: "www-data"
    xenial:
      majorVersion: "16"
      phpVersion: "7.0"
      apache2:
        pkgName: "apache2"
        user: "www-data"
        group: "www-data"
      nginx:
        pkgName: "nginx"
        user: "www-data"
        group: "www-data"
  CentOS:
    Core:
      majorVersion: "7"
      phpVersion: "5"
      apache2:
        pkgName: "httpd"
        user: "apache"
        group: "apache"
      nginx:
        pkgName: ["epel-release", "nginx"]
        user: "nginx"
        group: "nginx"


websrv_user: "{{supported_os[ansible_distribution][ansible_distribution_release][nextcloud_websrv].user}}"
websrv_group: "{{supported_os[ansible_distribution][ansible_distribution_release][nextcloud_websrv].group}}"
phpVersion: "{{supported_os[ansible_distribution][ansible_distribution_release].phpVersion}}"
websrv_pkg: "{{supported_os[ansible_distribution][ansible_distribution_release][nextcloud_websrv].pkgName}}"
